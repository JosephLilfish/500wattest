(function ($) {

    $('.need_fv input').change(function () {
        if ($(this).is(":checked")) {

            $(' .billing_invoice_field').show();
            $('#billing_nip').attr('disabled', true);

            var wrapper = $('#billing_nip').closest('.form-row').removeClass('woocommerce-invalid');

        } else {

            $('#billing_nip').attr('disabled', false);

            var wrapper = $('#billing_nip').closest('.form-row');

            if (!checkNIP($('#billing_nip').val()) && $('#billing_nip').val() != '') {

                wrapper.addClass('woocommerce-invalid');

            }

        }
    });
    $(document).ready(function () {

        if ($('.need_fv').find('.input-checkbox').is(":checked")) {
            $('#billing_nip').attr('disabled', true);
            $('.billing_invoice_field').show();

        } else {

            $('.billing_invoice_field').hide();
            $('#billing_nip').attr('disabled', false);

        }
    });

    $('body').on('change', '#billing_nip, #billing_invoice_nip', function () {

        let val = $(this).val();
        val = val.replace(/[^0-9]+/, '');

        $(this).val(val);

        var wrapper = $(this).closest('.form-row');

        if (checkNIP($(this).val()) || $(this).val() == '' && $(this).attr('id') == 'billing_nip') {

            wrapper.addClass('woocommerce-validated'); // success

        } else {

            wrapper.addClass('woocommerce-invalid'); // error

        }

    });

    $('body').on('change', '#billing_invoice_name, #billing_invoice_address, #billing_invoice_city', function () {

        var wrapper = $(this).closest('.form-row');

        if ($(this).val().length < 3) {
            wrapper.addClass('woocommerce-invalid'); // error
            invalid = true;
        } else {
            wrapper.addClass('woocommerce-validated'); // success
        }

    });

    $('body').on('blur change', '#billing_invoice_postcode', function () {

        var wrapper = $(this).closest('.form-row');

        let code = $(this).val().replace(/[^0-9]+/, '');
        console.log(code);

        if (code.length != 5) {
            wrapper.addClass('woocommerce-invalid'); // error
        } else {
            wrapper.addClass('woocommerce-validated'); // success
        }

    });

    $(document.body).on('checkout_error', function () {

        $('.woocommerce-NoticeGroup-checkout strong').each(function () {

            let oi = $(this).text().replace('Billing', '');
            $(this).text(oi)

        });


        if ($('#billing_invoice').is(":checked")) {

            $('#billing_invoice_name, #billing_invoice_address, #billing_invoice_city, #billing_invoice_nip').trigger('change');

        } else {

            $('.billing_invoice_field ').removeClass('woocommerce-invalid');

        }

    });

    


})(jQuery);

function checkNIP(str) {
    str = str.replace(/[^0-9]+/, '');

    if (str.length !== 10) {
        return false;
    }

    arrSteps = [6, 5, 7, 2, 3, 4, 5, 6, 7];
    intSum = 0;

    for (let i = 0; i < 9; i++) {
        intSum += arrSteps[i] * str[i];
    }

    int = intSum % 11;
    intControlNr = int === 10 ? 0 : int;

    if (intControlNr == str[9]) {
        return true;
    }

    return false;
}
(function (root, $, undefined) {
    if($("div").hasClass("product")){
        $(".discountPopup").hide();
$(".discountButton").click(function(){

    $('.discountPopup').show();
  });

  $(".popupClose").click(function(){
    $(".discountPopup").hide();
  })
}
  

}(this,jQuery));

    (function ($) {
        $("input.tnp-email").attr("placeholder", "Podaj adres email");



     

    })(jQuery);

(function ($) {

  
   


            $(document).ready(function () {
            
                setTimeout(function () {
                    bindEvents();
                }, 200)
            
            });
    



            $(document.body).on('updated_cart_totals', bindEvents);

            function bindEvents() {


                var qty = $('.quantity input');

                $('.button_q').on('click', function () {

                    let $fq = $(this).parent().find($('.quantity input'));
                    var $button = $(this);
                    var oldValue = $fq.val();
                    
                        if ($button.text() == "+") {

                             var newVal = parseFloat(oldValue) + 1;

                        } else {
                    // Don't allow decrementing below zero
                            if (oldValue > 1) {

                                var newVal = parseFloat(oldValue) - 1;

                            } else {

                                newVal = 1;

                            }
                    }
                    $fq.attr('value',newVal);
                    qty.trigger('change');
                });
            }

    


    // $(document.body).on('updated_cart_totals', bindEvents);

   




})(jQuery);

(function($){



    $('.slider_home-slider').slick({

        dots: false,

        infinite: true,

        autoplay: true,

        // prevArrow: "<button type='button' class='slick-prev pull-left'><i class='fas fa-chevron-left'></i></button>",

        // nextArrow: "<button type='button' class='slick-next pull-right'><i class='fas fa-chevron-right'></i></button>",

        autoplaySpeed: 6000,

        slidesToScroll: 1,

        slidesToShow: 1,

        arrows: false,

        swipeToSlide: true

    });

    $('.slick_in_prod').slick({

        dots: false,

        infinite: true,

        autoplay: true,

        prevArrow: "<button type='button' class='slick-prev pull-left'><i class='fas fa-chevron-left'></i></button>",

        nextArrow: "<button type='button' class='slick-next pull-right'><i class='fas fa-chevron-right'></i></button>",

        autoplaySpeed: 6000,

        slidesToScroll: 1,

        slidesToShow: 3,

        arrows: true,

        swipeToSlide: true,

        responsive: [

            {

                breakpoint: 980,

                settings: {

                    slidesToShow: 2,

                    slidesToScroll: 1

                }

            },

            {

                breakpoint: 480,

                settings: {

                    slidesToShow: 1,

                    slidesToScroll: 1

                }

            }

        ]

    });

    



})( jQuery );


(function($){



    $('.woocommerce-form #username').attr('placeholder','Login / E-mail');

    $('.woocommerce-form #password').attr('placeholder','Hasło');

    $('.woocommerce-form #reg_email').attr('placeholder','E-mail');



    $('#yith-wcwl-form .product-add-to-cart .nobr').text('Dodaj do koszyka / Usuń');







    if ($("body").hasClass("archive")) {



        $('.cat-parent').prepend("<span class='plus_cat-parent'></span>");

        $('.plus_cat-parent').on('click tap',function(){

            $(this).parent().toggleClass('active_cat');

        });



        $('.current-cat').parents('.current-cat-parent').addClass('active_cat');



    }



    $('.woocommerce-pagination li .next').text('>');

    $('.woocommerce-pagination li .prev').text('<');







    $(document.body).on('updated_cart_totals', cart_total);



    function cart_total(){



        if ($("body").hasClass("woocommerce-cart") || $("body").hasClass("woocommerce-checkout")) {

    

            var price_amount = $('.order-total .woocommerce-Price-amount bdi').text();

            $('.cart_top .text_side .cart_price span').text(price_amount);

    

        }

    }

    cart_total();

    

    var zero_dlugosc = $( '.woocommerce-product-attributes-item--attribute_pa_dlugosc .woocommerce-product-attributes-item__value p' ).text();
    var zero_szerokosc = $( '.woocommerce-product-attributes-item--attribute_pa_szerokosc .woocommerce-product-attributes-item__value p' ).text();
    var zero_wysokosc = $( '.woocommerce-product-attributes-item--attribute_pa_wysokosc .woocommerce-product-attributes-item__value p' ).text();
    
    if (zero_dlugosc == "0"){
        $('.woocommerce-product-attributes-item--attribute_pa_dlugosc').hide();
    }
    if (zero_szerokosc == "0"){
        $('.woocommerce-product-attributes-item--attribute_pa_szerokosc').hide();
    }
    if (zero_wysokosc == "0"){
        $('.woocommerce-product-attributes-item--attribute_pa_wysokosc').hide();
    }
})( jQuery );

